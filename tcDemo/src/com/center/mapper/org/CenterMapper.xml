<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.center.mapper.org.CenterMapper">

	<sql id="queryCenterWhere">
		<if test="centerName!=null and centerName!=''">
			and centerName like CONCAT(CONCAT('%', #{centerName}),'%')
		</if>
		<if test="centerAddress!=null and centerAddress!=''">
			and centerAddress like CONCAT(CONCAT('%', #{centerAddress}),'%')
		</if>
		<if test="createTimeBegin!=null and createTimeBegin!=''">
			<![CDATA[
			and STR_TO_DATE(createTime,'%Y-%m-%d') >= STR_TO_DATE(#{createTimeBegin},'%Y-%m-%d')
			]]>
		</if>
		<if test="createTimeEnd!=null and createTimeEnd!=''">
			<![CDATA[
			and STR_TO_DATE(createTime,'%Y-%m-%d') <= STR_TO_DATE(#{createTimeEnd},'%Y-%m-%d')
			]]>
		</if>
		
		<!-- 使用 foreach遍历传入ids
		collection：指定输入 对象中集合属性
		item：每个遍历生成对象中
		open：开始遍历时拼接的串
		close：结束遍历时拼接的串
		separator：遍历的两个对象中需要拼接的串
		 -->
		<!-- 实现  “ and id IN(1,10,16)”拼接 -->
		<!-- 
		<if test="ids!=null">
			<foreach collection="ids" item="user_id" open="and id IN(" close=")" separator=",">
				每个遍历需要拼接的串
				#{user_id}
			</foreach> 
		</if>
		-->
	</sql>
	
	<select id="queryCenterById" parameterType="int" resultType="Center">
		select centerId,
		       centerName,
		       centerAddress,
		      
		       createBy,
		       createTime,
		       remark 
		from tb_orgmgt_center where centerId=#{centerId}
	</select>
	
	<select id="queryCenterList" parameterType="centerQuery" resultType="Center">
		select centerId,
		       centerName,
		       centerAddress,
		       
		       createBy,
		       createTime,
		       remark 
		from tb_orgmgt_center
		<where>
			<include refid="queryCenterWhere"></include>
		</where>
		order by centerId desc
		limit #{start},#{length}
	</select>
	
	<select id="queryCenterCount" parameterType="centerQuery" resultType="long">
		select count(1) from tb_orgmgt_center
		<where>
			<include refid="queryCenterWhere"></include>
		</where>
		order by centerId desc
	</select>
	
	<delete id="deleteCenterById" parameterType="int">
		delete from tb_orgmgt_center where centerId=#{value}
	</delete>
	
	<insert id="addCenter" parameterType="Center" useGeneratedKeys="true" keyProperty="centerId">
		insert into tb_orgmgt_center
		(centerName, centerAddress,createBy, remark) 
		values (#{centerName}, #{centerAddress}, #{createBy}, #{remark});
	</insert>
	
	<update id="modifyCenterById" parameterType="center">
 		update tb_orgmgt_center
 		set centerName = #{centerName},
 		    centerAddress=#{centerAddress},
 		    
 		    remark=#{remark}
 		where centerId = #{centerId}
 	</update>
	
	<!-- 
	<select id="queryAll" resultType="center">
	    SELECT * FROM db_trainingcenter.tb_orgmgt_center
	</select>
	
	<select id="queryCenterByName" parameterType="String" resultType="center">
		SELECT * FROM db_trainingcenter.tb_orgmgt_center where centerName like '%' #{value} '%'
	</select>
	
	<update id="updateCenterByName" parameterType="com.center.po.org.Center">
	    update db_trainingcenter.tb_orgmgt_center
	    set 
	    centerAddress=#{centerAddress},
	    remark=#{remark}
	    where centerName=#{centerName}
	</update>
	
	<insert id="addCenter" parameterType="com.center.po.org.Center">
	    insert into db_trainingcenter.tb_orgmgt_center(
	    centerName,
	    centerAddress,
	    remark,
	    staffId,
	    createBy)
	    values(
	    #{centerName},
	    #{centerAddress},
	    #{remark},
	    #{staffId},
	    #{createBy})
	</insert>
	
	<delete id="deleteCenterById" parameterType="int">
	    delete from db_trainingcenter.tb_orgmgt_center where centerId = #{centerId}
	</delete> -->
	
</mapper>